組合
========

基本公式 
--------------

不同於排列，組合他不看順序，也就是拿出來就放在那邊，什麼也不做，他的公式長得像這樣

.. math::
    C^{n}_{k} = \frac{n!}{k!(n-k)!}

其中

.. code-block:: text

    n = 總共的數量
    k = 要被挑出來的數量

眼尖的你應該會發現，P跟C只差一個 :math:`\frac{1}{k!}` ，所以我們可以寫成

.. math::
    \frac{P^{n}_{k}}{k!} = C^{n}_{k}

或是

.. math::
    C^{n}_{k} \times k! = P_{k}^{n}

非常的好用。

.. note::
    因為一些原因，通常我們會用 :math:`C^{n}_{k} \times k!` 取代 :math:`P^{n}_{k}`

.. tip::
    一樣是定義， :math:`C^{n}_{0} = 1` ，翻譯成中文就是從n個選項裡面不選東西(那選個O)

----

今天你又在麥當勞，看到有一群學生要一起點漢堡，總共有12種漢堡要選9種，那請問有幾種組合呢？

我們有兩種解法：從12種選9種與12種剩3種

.. math::
    C^{12}_{9} = \frac{12!}{9!(12-9)!} = \frac{12!}{3!(12-3)!}

眼尖的你發現他們兩個算出來的結果是一樣的，所以可以利用這種方式來簡化計算

二項式定理
--------------

請你回想一下，我們國中上學期學過的平方跟立方的展開式長這樣

.. math::
    (x+y)^2 = x^2 + 2xy + y^2

.. math::
    (x+y)^3 = x^3 + 3x^2y+3xy^2 + y^3

吃完麥當勞很閒的你把三次方的展開式再展開

.. math::
    (x+y)^3 = (x+y)(x+y)(x+y) 

.. math::
            = (x+y)(xx+xy+yx+yy) 

.. math::
            = xxx + xxy + xyx + xyy + yxx + yxy + yyx + yyy

有沒有組合的恐懼出現了呢？

讓我們再看看他的係數怎來的

1. 都不選y(全x)的情況下就有 :math:`C^{3}_{0} = 1` 種
2. 選一個y的情況下有 :math:`C^{3}_{1} = 3` 種
3. 選兩個y有 :math:`C^{3}_{2} = 3` 種
4. 都選y有 :math:`C^{3}_{3} = 1` 種

所以他可以變成

.. math::
    (x+y)^3 = C^{3}_{0} x^3 + C^{3}_{1} x^2y + C^{3}_{2} xy^2 + C^{3}_{3} y^3

然後當你越列越多次方之後，然後剛剛好把它寫成三角形就變成這樣

.. image:: https://www.ntsec.edu.tw/UserFiles/image/61-6_12_fig1.gif
    :align: center
    :width: 80%

還有這樣

.. image:: https://blog.jayinnn.dev/image/Pascaltrianglewithc.png
    :align: center

你有沒有發現它上面兩個加起來會等於他下面那一個(如同紅色三角形那樣)(不信可以自己算算看)，他的公式長這樣

.. math::
    C^{n-1}_{k-1} + C^{n-1}_{k} = C^n_k

或是可以理解為上面一樣，下面差一留大的。

還有當你用橫排看的時候，他其實就是 :math:`(x+y)^n` 的係數，所以當我們 x=y=1 的時候，:math:`\sum_{i=0}^{n} C^{n}_{i} = 2^n` ，是不是非常美妙

小練習
----------

找數字
+++++++++

今天有 abcd 四位數， 而且 a < b < c < d，請問這樣的四位數共有幾個

我們要選四位數也就是

.. math::
    C^{10}_4

然後扣掉開頭為0的部分(0bcd)

.. math::
    C^9_3

.. note::
    因為這個挑出來是唯一值(不會重複) :math:`\rightarrow` 可以弄成符合條件的數字

所以總共是

.. math::
    C^{10}_4 - C^9_3 = 126

種

找數字EP.2
++++++++++++

三味數abc，而且 :math:`a \leq b\leq c` 有幾種

.. note::
    小公式 :math:`C^{n+r-1}_{r}`
    
    其中：

    .. code-block:: text

        n = 總數
        r = 要挑出的數量

.. math::
    C^{10+3-1}_{3} = C^{12}_{3} = 220

還要減一因為000的情況，所以有219種

:math:`C^n_k` 串串樂
++++++++++++++++++++

已知

.. math::
    C^{10}_{10}+C^{11}_{10}+C^{12}_{10}...C^{20}_{10} = C^n_k

但是 k>10,則n+k = ?

我們可以將 :math:`C^{10}_{10}` 換成 :math:`C^{11}_{11}`

然後就可以 :math:`C_{11}^{11} + C^{11}_{10} = C^{12}_{11}`

以此類推變成

.. math::
    C^{20}_{11} + C^{20}_{10} = C^{21}_{11} = 32

好多好多次方
++++++++++++++

:math:`11^{40}` 的百位數字(a)跟十位數字(b)組合為(a,b)為多少

:math:`11^{40}` 可以變成 :math:`(10+1)^{40}`

我們要找的目標是 :math:`11^{40}` 除以1000的餘數(寫作 :math:`11^{40} mod 1000` )

也就是要找10的兩次(因為40取n都很大，不然都是網上取一位看)跟一次還有0次，也就是

.. math::
    C^{40}_{2}\times 10^2 + C^{40}_{1}\times 10^1 + C^{40}_{0}\times 10^0 = 78000 + 400 + 1

然後找我們要的答案也就是(0,1)

放球時間
+++++++++++++

今天有5顆不一樣的球丟到三個箱子裡面，有幾種放法？

.. tip::
    反面姐會比較快

總共有 :math:`3^5` 種(球選箱子)

球只有丟到兩的箱子裡面(找兩個箱子隨便進)

.. math::
    C^3_2 \times 2^5 = 3\times 32 = 96

然後只有一個箱子的情況被多扣了


.. math::
    C^3_1 = 3

所以總共是

.. math::
    3^5 - C^3_2 \times 2^5 + C^3_1 = 150

有種公園阿伯的既視感(?)
+++++++++++++++++++++++

今天你有一盤棋分別有〔將、士、士、象、象、車、車、馬、馬、包、包、卒、卒、卒、卒、卒〕，總共有幾種排法

四個旗子都不一樣(七種取4種)然後再排列

.. math::
    C^7_4 \times 4! = 840

兩個一樣+兩個不一樣再排列

.. math::
    C^6_1 \times C^6_2 \times \frac{4!}{2!} = 6*15*4*3 = 1080

.. note::
    :math:`C^6_1` 是找一組兩個的，因為沒有將所以有六種
    | 後面 :math:`C^6_2` 是從剩下的挑兩個一個(所以將有支援)
    | 然後再用重複物排列

兩個兩個一樣

.. math::
    C^6_2 \times \frac{4!}{2!2!} = 90

三個一樣一個不一樣

只有一種棋子有大於三顆，然後剩下挑一個，再排列

.. math::
    1\times C^6_1\times \frac{4!}{3!} = 24

四個都一樣

只有卒大於四個所以只有一種

最後加起來

.. math::
    840+1+1080+24+90 = 2035

.. image:: https://memes.tw/user-tmp/1747061909378.png
    :width: 60%
    :align: center